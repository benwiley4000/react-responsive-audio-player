{"version":3,"sources":["webpack://cassetteComponents/webpack/universalModuleDefinition","webpack://cassetteComponents/webpack/bootstrap","webpack://cassetteComponents/external {\"root\":\"PropTypes\",\"commonjs\":\"prop-types\",\"commonjs2\":\"prop-types\",\"amd\":\"prop-types\"}","webpack://cassetteComponents/external {\"root\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\"}","webpack://cassetteComponents/external {\"root\":\"cassetteCore\",\"commonjs\":\"@cassette/core\",\"commonjs2\":\"@cassette/core\",\"amd\":\"@cassette/core\"}","webpack://cassetteComponents/external {\"root\":\"ResizeObserver\",\"commonjs\":\"resize-observer-polyfill\",\"commonjs2\":\"resize-observer-polyfill\",\"amd\":\"resize-observer-polyfill\"}","webpack://cassetteComponents/./src/utils/requestAnimationFrameWhenPageVisible.js","webpack://cassetteComponents/./src/MaybeMarquee.js","webpack://cassetteComponents/./src/utils/getProgressStyle.js","webpack://cassetteComponents/./src/utils/getHandleStyle.js","webpack://cassetteComponents/./src/ProgressBarDisplay.js","webpack://cassetteComponents/./src/utils/observeProgressBarRect.js","webpack://cassetteComponents/./src/ProgressBar.js","webpack://cassetteComponents/./src/MediaProgressBar.js","webpack://cassetteComponents/./src/MediaProgressBarDisplay.js","webpack://cassetteComponents/./src/VideoDisplay.js","webpack://cassetteComponents/./src/index.js"],"names":["hiddenKey","visibilitychangeKey","document","hidden","msHidden","webkitHidden","requestAnimationFrameWhenPageVisible","rafCallback","cancelled","id","addEventListener","requestAnimationFrame","once","cancelAnimationFrame","getNow","performance","now","Date","pxToNum","px","Number","slice","numToPx","num","constructor","props","state","contentHeight","moveMarquee","bind","handleResize","componentDidMount","requestMoveMarqueeAnimationFrame","marqueeContainerElementWidth","getComputedStyle","marqueeContainerElement","width","contentStyle","movingContentContainerElement","movingContentContainerElementWidth","setState","height","resizeObserver","observe","lastMovementTime","componentWillUnmount","cancelRaf","disconnect","pixelsPerSecond","scrollDirection","dt","style","right","undefined","left","movementInPixels","newOffset","entries","entry","target","contentRect","render","content","attributes","elem","position","overflow","whiteSpace","propTypes","node","isRequired","number","oneOf","defaultProps","getProgressStyle","progress","progressDirection","progressAheadPercentage","top","bottom","willChange","getHandleStyle","progressPercentage","transform","progressClassName","progressStyle","handle","progressBarRef","touchAction","string","object","element","ref","REFRESH_DELAY","transitionKeys","mutationObserverSupported","MutationObserver","observedElements","Set","cachedRects","Map","elementCallbacks","scrollTop","scrollLeft","isSetup","mutationObserver","setup","onTransitionend","window","refresh","updateScroll","teardown","removeEventListener","refreshTimeout","clearTimeout","updatedElements","newRect","getRectForElement","rectsAreDifferent","get","set","push","length","setTimeout","body","propertyName","isReflowProperty","some","key","indexOf","domRect","getBoundingClientRect","pageTop","pageLeft","a","b","observeProgressBarRect","callback","size","add","delete","noselectStyles","adjusting","tempProgress","progressContainer","setProgressContainerRef","handleAdjustProgress","handleAdjustComplete","unobserve","rect","cachedContainerRect","createElement","className","Math","random","toString","innerText","appendChild","noselectStyleElement","noselectClassName","componentDidUpdate","prevProps","prevState","onAdjustProgress","toggleNoselect","parentNode","removeChild","on","classList","getProgressFromPageCoordinates","pageX","pageY","event","readonly","type","preventDefault","isTouch","targetTouches","item","progressInBounds","onAdjustComplete","bool","func","handleSeekPreview","handleSeekComplete","onSeekPreview","duration","onSeekComplete","playlist","currentTime","seekPreviewTime","seekInProgress","durationOverride","time","displayedProgress","arrayOf","track","extractAspectRatio","aspectRatio","values","split","map","defaultBgColor","div","canvas","containerWidth","instanceOf","HTMLCanvasElement","Object","containerHeight","hostedVideo","videoFrameAtTimeLastVacated","containerResizeObserver","handleContainerResize","containerElement","registerVideoHostElement","onHostOccupied","videoElement","maxHeight","forceUpdate","onHostVacated","videoFrame","videoWidth","videoHeight","getContext","drawImage","maxWidth","verticalAlign","renderVideoIntoHostElement","unregisterVideoHostElement","offsetWidth","offsetHeight","fullscreen","maintainAspectRatioInFullscreen","renderPlaceholderContent","containerStyle","display","justifyContent","alignItems","background","warnedAboutStyleOverride","logWarning","stealVideo","renderLastShownFrame","params"],"mappings":"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","file":"esm/cassette-components.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"prop-types\"), require(\"react\"), require(\"@cassette/core\"), require(\"resize-observer-polyfill\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"prop-types\", \"react\", \"@cassette/core\", \"resize-observer-polyfill\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cassetteComponents\"] = factory(require(\"prop-types\"), require(\"react\"), require(\"@cassette/core\"), require(\"resize-observer-polyfill\"));\n\telse\n\t\troot[\"cassetteComponents\"] = factory(root[\"PropTypes\"], root[\"React\"], root[\"cassetteCore\"], root[\"ResizeObserver\"]);\n})((typeof self !== \"undefined\" ? self : this), function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__2__, __WEBPACK_EXTERNAL_MODULE__3__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","let hiddenKey;\nlet visibilitychangeKey;\nif (typeof document !== 'undefined') {\n  if (typeof document.hidden !== 'undefined') {\n    hiddenKey = 'hidden';\n    visibilitychangeKey = 'visibilitychange';\n  } else if (typeof document.msHidden !== 'undefined') {\n    hiddenKey = 'msHidden';\n    visibilitychangeKey = 'msvisibilitychange';\n  } else if (typeof document.webkitHidden !== 'undefined') {\n    hiddenKey = 'webkitHidden';\n    visibilitychangeKey = 'webkitvisibilitychange';\n  }\n}\n\nfunction requestAnimationFrameWhenPageVisible(rafCallback) {\n  // if we have access to the Page Visibility API we should\n  // check if the page is hidden and if so defer our requestAnimationFrame\n  if (hiddenKey && document[hiddenKey]) {\n    let cancelled = false;\n    let id;\n    document.addEventListener(\n      visibilitychangeKey,\n      () => {\n        if (!cancelled) {\n          id = requestAnimationFrame(rafCallback);\n        }\n      },\n      { once: true }\n    );\n    return () => {\n      cancelled = true;\n      cancelAnimationFrame(id);\n    };\n  } else {\n    const id = requestAnimationFrame(rafCallback);\n    return () => cancelAnimationFrame(id);\n  }\n}\n\nexport default requestAnimationFrameWhenPageVisible;\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport ResizeObserver from 'resize-observer-polyfill';\n\nimport requestAnimationFrameWhenPageVisible from './utils/requestAnimationFrameWhenPageVisible';\n\nconst getNow =\n  typeof performance !== 'undefined' && performance.now\n    ? () => performance.now()\n    : () => Date.now();\n\nfunction pxToNum(px) {\n  return Number(px.slice(0, -2));\n}\n\nfunction numToPx(num) {\n  return `${num}px`;\n}\n\n/**\n * Used to make content scroll in marquee fashion, only when the container area is too small for all the content to be displayed at once\n */\nexport class MaybeMarquee extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      contentHeight: 0\n    };\n\n    this.moveMarquee = this.moveMarquee.bind(this);\n    this.handleResize = this.handleResize.bind(this);\n  }\n\n  componentDidMount() {\n    this.requestMoveMarqueeAnimationFrame();\n\n    this.marqueeContainerElementWidth = getComputedStyle(\n      this.marqueeContainerElement\n    ).width;\n    const contentStyle = getComputedStyle(this.movingContentContainerElement);\n    this.movingContentContainerElementWidth = contentStyle.width;\n    this.setState({\n      contentHeight: contentStyle.height\n    });\n\n    this.resizeObserver = new ResizeObserver(this.handleResize);\n    this.resizeObserver.observe(this.marqueeContainerElement);\n    this.resizeObserver.observe(this.movingContentContainerElement);\n\n    this.lastMovementTime = getNow();\n  }\n\n  componentWillUnmount() {\n    this.cancelRaf();\n    this.resizeObserver.disconnect();\n  }\n\n  requestMoveMarqueeAnimationFrame() {\n    this.cancelRaf = requestAnimationFrameWhenPageVisible(this.moveMarquee);\n  }\n\n  moveMarquee() {\n    const { pixelsPerSecond, scrollDirection } = this.props;\n\n    const now = getNow();\n    const dt = now - this.lastMovementTime;\n    this.lastMovementTime = now;\n\n    if (scrollDirection === 'left') {\n      this.movingContentContainerElement.style.right = undefined;\n    } else {\n      this.movingContentContainerElement.style.left = undefined;\n    }\n\n    if (\n      this.marqueeContainerElementWidth >=\n      this.movingContentContainerElementWidth\n    ) {\n      // no scrolling since all the content fits\n      this.movingContentContainerElement.style[scrollDirection] = 0;\n    } else {\n      const movementInPixels = (pixelsPerSecond * dt) / 1000;\n\n      const newOffset =\n        pxToNum(this.movingContentContainerElement.style[scrollDirection]) -\n        movementInPixels;\n      if (newOffset > 0 - this.movingContentContainerElementWidth) {\n        // we still have room to scroll.. keep going\n        this.movingContentContainerElement.style[scrollDirection] = numToPx(\n          newOffset\n        );\n      } else {\n        // the content is off the screen so we should wrap around\n        this.movingContentContainerElement.style[scrollDirection] = numToPx(\n          this.marqueeContainerElementWidth\n        );\n      }\n    }\n\n    this.requestMoveMarqueeAnimationFrame();\n  }\n\n  handleResize(entries) {\n    for (const entry of entries) {\n      if (entry.target === this.marqueeContainerElement) {\n        this.marqueeContainerElementWidth = entry.contentRect.width;\n      }\n      if (entry.target === this.movingContentContainerElement) {\n        this.movingContentContainerElementWidth = entry.contentRect.width;\n        this.setState({\n          contentHeight: entry.contentRect.height\n        });\n      }\n    }\n  }\n\n  render() {\n    const { content, ...attributes } = this.props;\n    delete attributes.pixelsPerSecond;\n    delete attributes.scrollDirection;\n    return (\n      <div\n        {...attributes}\n        ref={elem => (this.marqueeContainerElement = elem)}\n        style={{\n          position: 'relative',\n          overflow: 'hidden',\n          height: this.state.contentHeight,\n          ...(attributes.style || {})\n        }}\n      >\n        <div\n          ref={elem => (this.movingContentContainerElement = elem)}\n          style={{ position: 'absolute', whiteSpace: 'nowrap' }}\n        >\n          {content}\n        </div>\n      </div>\n    );\n  }\n}\n\nMaybeMarquee.propTypes = {\n  content: PropTypes.node.isRequired,\n  pixelsPerSecond: PropTypes.number.isRequired,\n  scrollDirection: PropTypes.oneOf(['left', 'right']).isRequired\n};\n\nMaybeMarquee.defaultProps = {\n  pixelsPerSecond: 30,\n  scrollDirection: 'left'\n};\n\nexport default MaybeMarquee;\n","function getProgressStyle(progress, progressDirection) {\n  const progressAheadPercentage = `${(1 - (progress || 0)) * 100}%`;\n  const style = {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  };\n  switch (progressDirection) {\n    case 'left':\n      style.left = progressAheadPercentage;\n      style.willChange = 'left';\n      break;\n    case 'right':\n      style.right = progressAheadPercentage;\n      style.willChange = 'right';\n      break;\n    case 'up':\n      style.top = progressAheadPercentage;\n      style.willChange = 'top';\n      break;\n    case 'down':\n      style.bottom = progressAheadPercentage;\n      style.willChange = 'bottom';\n      break;\n    default:\n      break;\n  }\n  return style;\n}\n\nexport default getProgressStyle;\n","function getHandleStyle(progress, progressDirection) {\n  const progressPercentage = `${(progress || 0) * 100}%`;\n  const style = {\n    position: 'absolute',\n    transform: 'translate(-50%, -50%)'\n  };\n  switch (progressDirection) {\n    case 'left':\n      style.top = '50%';\n      style.right = progressPercentage;\n      style.willChange = 'right';\n      style.transform = 'translate(50%, -50%)';\n      break;\n    case 'right':\n      style.top = '50%';\n      style.left = progressPercentage;\n      style.willChange = 'left';\n      style.transform = 'translate(-50%, -50%)';\n      break;\n    case 'up':\n      style.left = '50%';\n      style.bottom = progressPercentage;\n      style.willChange = 'bottom';\n      style.transform = 'translate(-50%, 50%)';\n      break;\n    case 'down':\n      style.left = '50%';\n      style.top = progressPercentage;\n      style.willChange = 'top';\n      style.transform = 'translate(-50%, -50%)';\n      break;\n    default:\n      break;\n  }\n  return style;\n}\n\nexport default getHandleStyle;\n","import React, { PureComponent, forwardRef } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { PlayerPropTypes } from '@cassette/core';\n\nimport getProgressStyle from './utils/getProgressStyle';\nimport getHandleStyle from './utils/getHandleStyle';\n\n/**\n * A non-interactive version of [`ProgressBar`](#progressbar)\n */\nexport class ProgressBarDisplay extends PureComponent {\n  render() {\n    const {\n      progressClassName,\n      progressStyle,\n      progress,\n      progressDirection,\n      handle,\n      progressBarRef,\n      ...attributes\n    } = this.props;\n    return (\n      <div {...attributes} ref={progressBarRef}>\n        <div\n          style={{\n            position: 'relative',\n            width: '100%',\n            height: '100%',\n            touchAction: 'none'\n          }}\n        >\n          <div\n            className={progressClassName}\n            style={{\n              ...(progressStyle || {}),\n              ...getProgressStyle(progress, progressDirection)\n            }}\n          />\n          {handle && (\n            <div style={getHandleStyle(progress, progressDirection)}>\n              {handle}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nProgressBarDisplay.propTypes = {\n  progressClassName: PropTypes.string,\n  progressStyle: PropTypes.object,\n  progress: PropTypes.number.isRequired,\n  progressDirection: PlayerPropTypes.progressDirection.isRequired,\n  handle: PropTypes.element\n};\n\nexport default forwardRef((props, ref) => {\n  return <ProgressBarDisplay {...props} progressBarRef={ref} />;\n});\n","/*\nAdapted from resize-observer-polyfill which has this license:\nThe MIT License (MIT)\n\nCopyright (c) 2016 Denis Rul\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\n// Minimum delay before invoking the update of observers.\nconst REFRESH_DELAY = 20;\n\n// A list of substrings of CSS properties used to find transition events that\n// might affect dimensions of observed elements.\nconst transitionKeys = [\n  'top',\n  'right',\n  'bottom',\n  'left',\n  'width',\n  'height',\n  'size',\n  'weight'\n];\n\n// Check if MutationObserver is available.\nconst mutationObserverSupported = typeof MutationObserver !== 'undefined';\n\nconst observedElements = new Set();\nconst cachedRects = new Map();\nconst elementCallbacks = new Map();\n\nlet scrollTop;\nlet scrollLeft;\n\nlet isSetup = false;\nlet mutationObserver;\nfunction setup() {\n  if (isSetup) {\n    return;\n  }\n  document.addEventListener('transitionend', onTransitionend);\n  window.addEventListener('resize', refresh);\n  if (mutationObserverSupported) {\n    mutationObserver = new MutationObserver(refresh);\n    // we don't observe contents since the progress bar's contents\n    // are expected to conform to the shape of the container\n    mutationObserver.observe(document, { attributes: true });\n  } else {\n    document.addEventListener('DOMSubtreeModified', refresh);\n  }\n  document.addEventListener('scroll', updateScroll);\n  updateScroll();\n  isSetup = true;\n}\n\nfunction teardown() {\n  if (!isSetup) {\n    return;\n  }\n  document.removeEventListener('transitionend', onTransitionend);\n  window.removeEventListener('resize', refresh);\n  if (mutationObserverSupported) {\n    mutationObserver.disconnect();\n  } else {\n    document.removeEventListener('DOMSubtreeModified', refresh);\n  }\n  document.removeEventListener('scroll', updateScroll);\n  isSetup = false;\n}\n\nlet refreshTimeout;\nfunction refresh() {\n  clearTimeout(refreshTimeout);\n  const updatedElements = [];\n  for (const element of observedElements) {\n    const newRect = getRectForElement(element);\n    if (rectsAreDifferent(cachedRects.get(element), newRect)) {\n      cachedRects.set(element, newRect);\n      updatedElements.push(element);\n    }\n  }\n  for (const element of updatedElements) {\n    elementCallbacks.get(element)(cachedRects.get(element));\n  }\n  if (updatedElements.length) {\n    // check again in the future to make sure nothing wasn't about to change\n    refreshTimeout = setTimeout(refresh, REFRESH_DELAY);\n  }\n}\n\nfunction updateScroll() {\n  scrollTop = document.body.scrollTop;\n  scrollLeft = document.body.scrollLeft;\n}\n\nfunction onTransitionend({ propertyName = '' }) {\n  // Detect whether transition may affect dimensions of an element.\n  const isReflowProperty = transitionKeys.some(key => {\n    return propertyName.indexOf(key) !== -1;\n  });\n  if (isReflowProperty) {\n    refresh();\n  }\n}\n\nfunction getRectForElement(element) {\n  const domRect = element.getBoundingClientRect();\n  return {\n    pageTop: domRect.top + scrollTop,\n    pageLeft: domRect.left + scrollLeft,\n    width: domRect.width,\n    height: domRect.height\n  };\n}\n\nfunction rectsAreDifferent(a, b) {\n  return (\n    a.pageTop !== b.pageTop ||\n    a.pageLeft !== b.pageLeft ||\n    a.width !== b.width ||\n    a.height !== b.height\n  );\n}\n\nfunction observeProgressBarRect(element, callback) {\n  if (!observedElements.size) {\n    setup();\n  }\n  observedElements.add(element);\n  cachedRects.set(element, getRectForElement(element));\n  elementCallbacks.set(element, callback);\n  callback(cachedRects.get(element));\n  return () => {\n    observedElements.delete(element);\n    cachedRects.delete(element);\n    elementCallbacks.delete(element);\n    if (!observedElements.size) {\n      teardown();\n    }\n  };\n}\n\nexport default observeProgressBarRect;\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n  PlayerPropTypes,\n  convertToNumberWithinIntervalBounds\n} from '@cassette/core';\n\nimport ProgressBarDisplay from './ProgressBarDisplay';\nimport observeProgressBarRect from './utils/observeProgressBarRect';\n\nconst noselectStyles = `\ncursor: default;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  -webkit-touch-callout: none;\n`;\n\n/**\n * A vertical or horizontal progress bar element which can be manipulated by mouse or touch\n */\nexport class ProgressBar extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      adjusting: false,\n      // used while adjusting\n      tempProgress: null\n    };\n\n    this.progressContainer = null;\n\n    // bind methods fired on React events\n    this.setProgressContainerRef = this.setProgressContainerRef.bind(this);\n    this.handleAdjustProgress = this.handleAdjustProgress.bind(this);\n\n    // bind listeners to add on mount and remove on unmount\n    this.handleAdjustComplete = this.handleAdjustComplete.bind(this);\n  }\n\n  componentDidMount() {\n    // add event listeners bound outside the scope of our component\n    window.addEventListener('mousemove', this.handleAdjustProgress);\n    document.addEventListener('touchmove', this.handleAdjustProgress);\n    window.addEventListener('mouseup', this.handleAdjustComplete);\n    document.addEventListener('touchend', this.handleAdjustComplete);\n\n    this.unobserve = observeProgressBarRect(this.progressContainer, rect => {\n      this.cachedContainerRect = rect;\n    });\n\n    setTimeout(() => {\n      const style = document.createElement('style');\n      const className = `noselect_${Math.random()\n        .toString(16)\n        .slice(2, 7)}`;\n      style.innerText = `.${className}{${noselectStyles}}`;\n      document.body.appendChild(style);\n      this.noselectStyleElement = style;\n      this.noselectClassName = className;\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { adjusting, tempProgress } = this.state;\n    if (adjusting && tempProgress !== prevState.tempProgress) {\n      this.props.onAdjustProgress(tempProgress);\n    }\n  }\n\n  componentWillUnmount() {\n    // remove event listeners bound outside the scope of our component\n    window.removeEventListener('mousemove', this.handleAdjustProgress);\n    document.removeEventListener('touchmove', this.handleAdjustProgress);\n    window.removeEventListener('mouseup', this.handleAdjustComplete);\n    document.removeEventListener('touchend', this.handleAdjustComplete);\n\n    this.unobserve();\n\n    // remove noselect class in case a drag is in progress\n    this.toggleNoselect(false);\n    // noselectStyleElement might not exist if the component unmounts\n    // before the timeout callback is called.\n    if (this.noselectStyleElement) {\n      this.noselectStyleElement.parentNode.removeChild(\n        this.noselectStyleElement\n      );\n    }\n  }\n\n  setProgressContainerRef(ref) {\n    this.progressContainer = ref;\n  }\n\n  toggleNoselect(on) {\n    document.body.classList[on ? 'add' : 'remove'](this.noselectClassName);\n  }\n\n  getProgressFromPageCoordinates(pageX, pageY) {\n    const { pageLeft, pageTop, width, height } = this.cachedContainerRect;\n    switch (this.props.progressDirection) {\n      case 'down':\n        return (pageY - pageTop) / height;\n      case 'left':\n        return 1 - (pageX - pageLeft) / width;\n      case 'up':\n        return 1 - (pageY - pageTop) / height;\n      case 'right':\n      default:\n        return (pageX - pageLeft) / width;\n    }\n  }\n\n  handleAdjustProgress(event) {\n    if (this.props.readonly) {\n      return;\n    }\n    // make sure we don't select stuff in the background\n    if (event.type === 'mousedown' || event.type === 'touchstart') {\n      this.toggleNoselect(true);\n    } else if (!this.state.adjusting) {\n      return;\n    }\n    /* we don't want mouse handlers to receive the event\n     * after touch handlers, so prevent default\n     */\n    event.preventDefault();\n    const isTouch = event.type.slice(0, 5) === 'touch';\n    const pageX = isTouch ? event.targetTouches.item(0).pageX : event.pageX;\n    const pageY = isTouch ? event.targetTouches.item(0).pageY : event.pageY;\n    const progress = this.getProgressFromPageCoordinates(pageX, pageY);\n    const progressInBounds = convertToNumberWithinIntervalBounds(\n      progress,\n      0,\n      1\n    );\n    this.setState({\n      adjusting: true,\n      tempProgress: progressInBounds\n    });\n  }\n\n  handleAdjustComplete(event) {\n    const { onAdjustComplete } = this.props;\n    /* this function is activated when the user lets go of\n     * the mouse, so if noselect was applied\n     * to the document body, get rid of it.\n     */\n    this.toggleNoselect(false);\n    const { adjusting, tempProgress } = this.state;\n    if (!adjusting) {\n      return;\n    }\n    /* we don't want mouse handlers to receive the event\n     * after touch handlers, so prevent default\n     */\n    event.preventDefault();\n    this.setState({\n      adjusting: false,\n      tempProgress: null\n    });\n    onAdjustComplete(tempProgress);\n  }\n\n  render() {\n    const {\n      progressClassName,\n      progressStyle,\n      progress,\n      progressDirection,\n      handle,\n      ...attributes\n    } = this.props;\n    const { adjusting, tempProgress } = this.state;\n    delete attributes.readonly;\n    delete attributes.onAdjustProgress;\n    delete attributes.onAdjustComplete;\n    return (\n      <ProgressBarDisplay\n        {...attributes}\n        ref={this.setProgressContainerRef}\n        progressClassName={progressClassName}\n        progressStyle={progressStyle}\n        progress={adjusting ? tempProgress : progress}\n        progressDirection={progressDirection}\n        handle={handle}\n        onMouseDown={this.handleAdjustProgress}\n        onTouchStart={this.handleAdjustProgress}\n      />\n    );\n  }\n}\n\nProgressBar.propTypes = {\n  progressClassName: PropTypes.string,\n  progressStyle: PropTypes.object,\n  progress: PropTypes.number.isRequired,\n  progressDirection: PlayerPropTypes.progressDirection.isRequired,\n  handle: PropTypes.element,\n  readonly: PropTypes.bool.isRequired,\n  onAdjustProgress: PropTypes.func.isRequired,\n  onAdjustComplete: PropTypes.func.isRequired\n};\n\nProgressBar.defaultProps = {\n  readonly: false\n};\n\nexport default ProgressBar;\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n  playerContextFilter,\n  PlayerPropTypes,\n  isPlaylistValid\n} from '@cassette/core';\n\nimport ProgressBar from './ProgressBar';\n\n/**\n * An enhanced [`ProgressBar`](#progressbar) which uses the surrounding [`playerContext`](#playercontext) to set its own props for `progress`, `readonly`, `onAdjustProgress` and `onSeekComplete`, and accepts all the other props available for `ProgressBar`\n */\nexport class MediaProgressBar extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    // bind methods fired on React events\n    this.handleSeekPreview = this.handleSeekPreview.bind(this);\n    this.handleSeekComplete = this.handleSeekComplete.bind(this);\n  }\n\n  handleSeekPreview(progress) {\n    this.props.onSeekPreview(progress * this.props.duration);\n  }\n\n  handleSeekComplete(progress) {\n    this.props.onSeekComplete(progress * this.props.duration);\n  }\n\n  render() {\n    const {\n      playlist,\n      currentTime,\n      seekPreviewTime,\n      seekInProgress,\n      duration,\n      durationOverride = duration,\n      ...attributes\n    } = this.props;\n    delete attributes.onSeekPreview;\n    delete attributes.onSeekComplete;\n    const time = seekInProgress ? seekPreviewTime : currentTime;\n    const displayedProgress = durationOverride ? time / durationOverride : 0;\n    return (\n      <ProgressBar\n        {...attributes}\n        progress={displayedProgress}\n        readonly={!isPlaylistValid(playlist)}\n        onAdjustProgress={this.handleSeekPreview}\n        onAdjustComplete={this.handleSeekComplete}\n      />\n    );\n  }\n}\n\nMediaProgressBar.propTypes = {\n  playlist: PropTypes.arrayOf(PlayerPropTypes.track.isRequired).isRequired,\n  currentTime: PropTypes.number.isRequired,\n  seekPreviewTime: PropTypes.number.isRequired,\n  seekInProgress: PropTypes.bool.isRequired,\n  duration: PropTypes.number.isRequired,\n  onSeekPreview: PropTypes.func.isRequired,\n  onSeekComplete: PropTypes.func.isRequired,\n  durationOverride: PropTypes.number\n};\n\nexport default playerContextFilter(MediaProgressBar, [\n  'playlist',\n  'currentTime',\n  'seekPreviewTime',\n  'seekInProgress',\n  'duration',\n  'onSeekPreview',\n  'onSeekComplete'\n]);\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { playerContextFilter } from '@cassette/core';\n\nimport ProgressBarDisplay from './ProgressBarDisplay';\n\n/**\n * An enhanced [`ProgressBarDisplay`](#progressbardisplay) which uses the surrounding [`playerContext`](#playercontext) to set its own `progress` prop, and accepts all the other props available for `ProgressBarDisplay`\n */\nexport class MediaProgressBarDisplay extends PureComponent {\n  render() {\n    const {\n      currentTime,\n      duration,\n      durationOverride = duration,\n      ...attributes\n    } = this.props;\n    const progress = durationOverride ? currentTime / durationOverride : 0;\n    return <ProgressBarDisplay {...attributes} progress={progress} />;\n  }\n}\n\nMediaProgressBarDisplay.propTypes = {\n  currentTime: PropTypes.number.isRequired,\n  duration: PropTypes.number.isRequired,\n  durationOverride: PropTypes.number\n};\n\nexport default playerContextFilter(MediaProgressBarDisplay, [\n  'currentTime',\n  'duration'\n]);\n","import React, { PureComponent, Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ResizeObserver from 'resize-observer-polyfill';\n\nimport {\n  playerContextFilter,\n  PlayerPropTypes,\n  logWarning\n} from '@cassette/core';\n\n// 'x:y' -> x / y\nfunction extractAspectRatio(aspectRatio) {\n  const values = aspectRatio.split(':').map(Number);\n  return values[0] / values[1];\n}\n\nconst defaultBgColor = '#000';\n\nclass InjectedCanvas extends Component {\n  componentDidMount() {\n    this.div.appendChild(this.props.canvas);\n  }\n\n  render() {\n    return (\n      <div\n        style={{ width: this.props.containerWidth }}\n        ref={elem => (this.div = elem)}\n      />\n    );\n  }\n}\n\nInjectedCanvas.propTypes = {\n  containerWidth: PropTypes.number,\n  canvas: PropTypes.instanceOf(\n    typeof HTMLCanvasElement === 'undefined' ? Object : HTMLCanvasElement\n  )\n};\n\n/**\n * A container for the video content from the surrounding [`playerContext`](#playercontext)\n */\nexport class VideoDisplay extends PureComponent {\n  constructor(props) {\n    super(props);\n    // using instance properties instead of React state to make sure\n    // we can avoid annoying race conditions\n    this.containerWidth = 0;\n    this.containerHeight = 0;\n    this.hostedVideo = null;\n    this.videoFrameAtTimeLastVacated = null;\n  }\n\n  componentDidMount() {\n    this.containerResizeObserver = new ResizeObserver(\n      this.handleContainerResize.bind(this)\n    );\n    this.containerResizeObserver.observe(this.containerElement);\n\n    this.props.registerVideoHostElement(this.containerElement, {\n      onHostOccupied: videoElement => {\n        videoElement.style.width = `${this.containerWidth}px`;\n        videoElement.style.maxHeight = `${this.containerHeight}px`;\n        this.hostedVideo = videoElement;\n        this.forceUpdate();\n      },\n      onHostVacated: videoElement => {\n        // TODO: take into account container size and pixel density\n        // when sizing videoFrame canvas element?\n        const videoFrame = document.createElement('canvas');\n        videoFrame.width = videoElement.videoWidth;\n        videoFrame.height = videoElement.videoHeight;\n        videoFrame\n          .getContext('2d')\n          .drawImage(videoElement, 0, 0, videoFrame.width, videoFrame.height);\n        videoFrame.style.maxWidth = '100%';\n        // 'vertical-align: middle' avoids unneeded 3px buffer below canvas\n        videoFrame.style.verticalAlign = 'middle';\n        this.videoFrameAtTimeLastVacated = videoFrame;\n        this.hostedVideo = null;\n        this.forceUpdate();\n      }\n    });\n    this.props.renderVideoIntoHostElement(this.containerElement);\n  }\n\n  componentWillUnmount() {\n    this.containerResizeObserver.disconnect();\n    this.props.unregisterVideoHostElement(this.containerElement);\n  }\n\n  handleContainerResize() {\n    const { offsetWidth, offsetHeight } = this.containerElement;\n    if (\n      offsetWidth === this.containerWidth &&\n      offsetHeight === this.containerHeight\n    ) {\n      return;\n    }\n\n    if (this.hostedVideo) {\n      this.hostedVideo.style.width = `${offsetWidth}px`;\n      this.hostedVideo.style.maxHeight = `${offsetHeight}px`;\n    }\n    this.containerWidth = offsetWidth;\n    this.containerHeight = offsetHeight;\n    this.forceUpdate();\n  }\n\n  render() {\n    const {\n      aspectRatio,\n      fullscreen,\n      maintainAspectRatioInFullscreen,\n      renderPlaceholderContent,\n      renderVideoIntoHostElement,\n      ...attributes\n    } = this.props;\n    delete attributes.registerVideoHostElement;\n    delete attributes.unregisterVideoHostElement;\n\n    const containerStyle = {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      background: defaultBgColor,\n      ...(attributes.style || {})\n    };\n    if (\n      aspectRatio &&\n      this.containerWidth &&\n      (!fullscreen || maintainAspectRatioInFullscreen)\n    ) {\n      if (containerStyle.height && !this.warnedAboutStyleOverride) {\n        logWarning(\n          'VideoDisplay cannot use style.height prop because it is ' +\n            'overridden by aspectRatio.'\n        );\n        this.warnedAboutStyleOverride = true;\n      }\n      // h = w/(x/y)  -->  h*(x/y) = w  -->  x/y = w/h\n      containerStyle.height =\n        this.containerWidth / extractAspectRatio(aspectRatio);\n    }\n\n    return (\n      <div\n        {...attributes}\n        style={containerStyle}\n        ref={elem => (this.containerElement = elem)}\n      >\n        {this.hostedVideo\n          ? null\n          : renderPlaceholderContent({\n              containerWidth: this.containerWidth,\n              containerHeight: this.containerHeight,\n              stealVideo: () =>\n                renderVideoIntoHostElement(this.containerElement),\n              renderLastShownFrame: () =>\n                this.videoFrameAtTimeLastVacated && (\n                  <InjectedCanvas\n                    canvas={this.videoFrameAtTimeLastVacated}\n                    containerWidth={this.containerWidth}\n                  />\n                )\n            })}\n      </div>\n    );\n  }\n}\n\nVideoDisplay.propTypes = {\n  registerVideoHostElement: PropTypes.func.isRequired,\n  renderVideoIntoHostElement: PropTypes.func.isRequired,\n  unregisterVideoHostElement: PropTypes.func.isRequired,\n  fullscreen: PropTypes.bool,\n  aspectRatio: PlayerPropTypes.aspectRatio,\n  maintainAspectRatioInFullscreen: PropTypes.bool.isRequired,\n  renderPlaceholderContent: PropTypes.func.isRequired\n};\n\nVideoDisplay.defaultProps = {\n  aspectRatio: '16:9',\n  maintainAspectRatioInFullscreen: false,\n  renderPlaceholderContent(params) {\n    const { containerWidth, containerHeight, renderLastShownFrame } = params;\n    return (\n      <div\n        style={{\n          width: containerWidth,\n          height: containerHeight,\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center'\n        }}\n      >\n        {renderLastShownFrame()}\n      </div>\n    );\n  }\n};\n\nexport default playerContextFilter(VideoDisplay, [\n  'registerVideoHostElement',\n  'renderVideoIntoHostElement',\n  'unregisterVideoHostElement',\n  'fullscreen'\n]);\n","import MaybeMarquee from './MaybeMarquee';\nimport ProgressBar from './ProgressBar';\nimport ProgressBarDisplay from './ProgressBarDisplay';\nimport MediaProgressBar from './MediaProgressBar';\nimport MediaProgressBarDisplay from './MediaProgressBarDisplay';\nimport VideoDisplay from './VideoDisplay';\n\nexport { MaybeMarquee };\nexport { ProgressBar };\nexport { ProgressBarDisplay };\nexport { MediaProgressBar };\nexport { MediaProgressBarDisplay };\nexport { VideoDisplay };\n"],"sourceRoot":""}